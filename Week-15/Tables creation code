CREATE DATABASE WarehouseDB;

USE WarehouseDB;

CREATE TABLE CITIES (
    CITY_ID INT PRIMARY KEY AUTO_INCREMENT,
    CITY CHAR(20),
    STATE CHAR(20)
);

CREATE TABLE WAREHOUSES (
    WID INT PRIMARY KEY AUTO_INCREMENT,
    WNAME CHAR(30),
    LOCATION CHAR(20),
    CITY_ID INT,
    EXTRA_CONTEXT JSON,
    FOREIGN KEY (CITY_ID) REFERENCES CITIES (CITY_ID)
);

CREATE TABLE STORES (
    SID INT PRIMARY KEY AUTO_INCREMENT,
    STORE_NAME CHAR(20),
    LOCATION_CITY CHAR(20),
    WID INT,
    FOREIGN KEY (WID) REFERENCES WAREHOUSES (WID)
);

CREATE TABLE CUSTOMER (
    CNO INT PRIMARY KEY AUTO_INCREMENT,
    CNAME CHAR(50),
    ADDR VARCHAR(50),
    CU_CITY CHAR(20)
);

CREATE TABLE ORDERS (
    ONO INT PRIMARY KEY AUTO_INCREMENT,
    ODATE DATE,
    CNO INT,
    FOREIGN KEY (CNO) REFERENCES CUSTOMER (CNO)
);

CREATE TABLE ITEMS (
    ITEMNO INT PRIMARY KEY AUTO_INCREMENT,
    DESCRIPTION TEXT,
    WEIGHT DECIMAL(5,2),
    COST DECIMAL(5,2)
);

CREATE TABLE ORDER_ITEMS (
    ONO INT,
    ITEMNO INT,
    ordered_quantity INT,
    PRIMARY KEY (ONO, ITEMNO),
    FOREIGN KEY (ONO) REFERENCES ORDERS (ONO),
    FOREIGN KEY (ITEMNO) REFERENCES ITEMS (ITEMNO)
);

CREATE TABLE STORE_ITEMS (
    SID INT,
    ITEMNO INT,
    quantity INT,
    PRIMARY KEY (SID, ITEMNO),
    FOREIGN KEY (SID) REFERENCES STORES (SID),
    FOREIGN KEY (ITEMNO) REFERENCES ITEMS (ITEMNO)
);
